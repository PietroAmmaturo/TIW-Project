<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div>
	    <h1>Playlist</h1>
	
		<div th:if="${not #maps.isEmpty(playlistSongsWithAlbum)}">
			<form th:action="@{/RemoveSongsFromPlaylist(playlistId=${playlistId})}" method="post">
			    <input type="hidden" name="playlistId" th:value="${playlistId}"/>
			    <table>
					<tbody>
					  <tr>
					    <td th:each="entry : ${playlistSongsWithAlbum}"></td>
					  </tr>
					  <tr>
					    <td th:each="entry, iter : ${playlistSongsWithAlbum}">
					      <div th:if="${iter.index >= 5}" hidden>
					        <input type="checkbox" name="songIds" th:value="${entry.key.id}"/>
					        <label for="songIds">
					          <a th:href="@{/GoToPlayer(songId=${songId})}" th:text="${entry.key.title}"></a>
					        </label>
					        <img th:src="${entry.value.image}" th:alt="${entry.value.title}">
					      </div>
					      <div th:if="${iter.index < 5}">
					        <input type="checkbox" name="songIds" th:value="${entry.key.id}"/>
					        <label for="songIds">
					          <a th:href="@{/GoToPlayer(songId=${songId})}" th:text="${entry.key.title}"></a>
					        </label>
					        <img th:src="${entry.value.image}" th:alt="${entry.value.title}">
					      </div>
					    </td>
					  </tr>
					</tbody>
			    </table>
			    <button type="submit">Remove selected songs</button>
			    
				<div>
			        <a>Previous</a>
			    </div>
			
			    <div>
			        <a>Next</a>
			    </div>
			</form>
		</div>
	
	    <h2>Add Song to Playlist</h2>
		<form method="post" th:action="@{/AddSongsToPlaylist(playlistId=${playlistId})}">
		    <div>
		        <label for="song">Songs:</label>
		        <br>
		        <select id="song"
		                name="songIds"
		                multiple>
		            <option value="">-- Select songs --</option>
		            <option th:each="song : ${userSongs}"
		                    th:value="${song.id}"
		                    th:text="${song.title}"></option>
		        </select>
		    </div>
		    <button type="submit">Add to Playlist</button>
		</form>
	</div>
	<div>
		<!-- Iterate through each song in the playlist -->
		<div th:each="entry, iter : ${playlistSongsWithAlbum}">
		    <!-- Only display the first song element -->
		    <div th:if="${iter.index == 0}">
		        <h1>Song Details</h1>
		        <!-- Extract the Song and Album from the Map entry -->
		        <th:block th:with="song=${entry.key}, album=${entry.value}">
		            <h2 th:text="${song.title}"></h2>
		            <img th:src="${album.image}" />
		            <!-- Display other details of the song such as artist, album, year, genre, etc. -->
		            <p>Artist: <span th:text="${album.interpreter}"></span></p>
		            <p>Album: <span th:text="${album.title}"></span></p>
		            <p>Year: <span th:text="${album.publicationYear}"></span></p>
		            <!-- Add an audio player for song playback -->
		            <audio th:src="${song.audio}" controls></audio>
		        </th:block>
		    </div>
		    <!-- Hide all other song elements -->
		    <div th:if="${iter.index > 0}" hidden>
		        <h1>Song Details</h1>
		        <!-- Extract the Song and Album from the Map entry -->
		        <th:block th:with="song=${entry.key}, album=${entry.value}">
		            <h2 th:text="${song.title}"></h2>
		            <img th:src="${album.image}" />
		            <!-- Display other details of the song such as artist, album, year, genre, etc. -->
		            <p>Artist: <span th:text="${album.interpreter}"></span></p>
		            <p>Album: <span th:text="${album.title}"></span></p>
		            <p>Year: <span th:text="${album.publicationYear}"></span></p>
		            <!-- Add an audio player for song playback -->
		            <audio th:src="${song.audio}" controls></audio>
		        </th:block>
		    </div>
		</div>
	</div>
</body>
</html>